#include<bits/stdc++.h>

#define fr(a,b) for(int a = 0; a < b; a++)
#define frr(a,b,c) for(int a = b; a < c; a++)
#define ms(a,b) memset(a, b, sizeof(a))
#define INF 0x3f3f3f3f
#define db(x) cerr << #x << " == " << x << endl
#define _ << ", " <<
#define ll long long
#define vi vector<int>
#define vii vector< vi >
#define sc(a) scanf("%d", &a)
#define sc2(a,b) scanf("%d%d", &a, &b)
#define sc3(a,b,c) scanf("%d%d%d", &a, &b, &c)
#define pb push_back
#define pri(x) printf("%d\n", x)

using namespace std;

int n, m, e, b[2500], f[2500];

int main() {
    //freopen("in.txt", "r", stdin);
    int t, p;
    sc(t);
    while (t--) {
        sc2(n, m); m++;
        e = 0;
        p = 1;
        while (m >= 2) {
            while (p != 1 && n%p == 0) p++;
            fr(x, n) {
                b[e] = x;
                f[e] = (x+p)%n;
                e++;
            }
            p++;
            m -= 2;
        }
        if (m) {
            fr(x, (n+1)/2) {
                b[e] = x;
                f[e] = (x+(n/2))%n;
                e++;
            }
        }
        pri(e);
        fr(x, e) printf("%d %d\n", b[x]+1, f[x]+1);
        puts("");
    }
	return 0;
}